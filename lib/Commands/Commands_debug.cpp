#include <Commands.h>
#include <Modifiers.h>
#include <ColorTools.h>

void Commands::debug(LedStructure *leds, CommandParams cmd)
{
  Debug debug = cmd.type_params.debug;

  int cnt = 16;

  // https://lospec.com/palette-list/2d-comic-exploration-game-dafridgesadventures2
  // CRGB colors[cnt] = {
  //     CRGB(0x12, 0x12, 0x14),
  //     CRGB(0xff, 0xff, 0xff),
  //     CRGB(0x92, 0x92, 0x92),
  //     CRGB(0x04, 0x3d, 0x13),
  //     CRGB(0x00, 0x5b, 0x04),
  //     CRGB(0x72, 0x9f, 0x41),
  //     CRGB(0x13, 0x34, 0x5a),
  //     CRGB(0x25, 0x56, 0x8f),
  //     CRGB(0x4b, 0x99, 0xb5),
  //     CRGB(0x52, 0x32, 0x09),
  //     CRGB(0x82, 0x51, 0x11),
  //     CRGB(0xb5, 0x78, 0x28),
  //     CRGB(0xea, 0x30, 0x30),
  //     CRGB(0xac, 0x32, 0x32),
  //     CRGB(0xff, 0xa8, 0x11),
  //     CRGB(0xea, 0xd3, 0xae),
  // };

  // https://lospec.com/palette-list/sweetie-16
  CRGB colors[cnt] = {
      CRGB(0x1a, 0x1c, 0x2c),
      CRGB(0x5d, 0x27, 0x5d),
      CRGB(0xb1, 0x3e, 0x53),
      CRGB(0xef, 0x7d, 0x57),
      CRGB(0xff, 0xcd, 0x75),
      CRGB(0xa7, 0xf0, 0x70),
      CRGB(0x38, 0xb7, 0x64),
      CRGB(0x25, 0x71, 0x79),
      CRGB(0x29, 0x36, 0x6f),
      CRGB(0x3b, 0x5d, 0xc9),
      CRGB(0x41, 0xa6, 0xf6),
      CRGB(0x73, 0xef, 0xf7),
      CRGB(0xf4, 0xf4, 0xf4),
      CRGB(0x94, 0xb0, 0xc2),
      CRGB(0x56, 0x6c, 0x86),
      CRGB(0x33, 0x3c, 0x57),
  };

  CRGB color = CHSV(debug.param1, debug.param2, debug.param3);
  // color = CHSV(60, 200, 200);
  // CRGB color = CRGB(0, 255, 255);
  // CRGB color = CRGB::RoyalBlue;
  ColorTools::gamma_correction(color);

  for (int i = 0; i < leds->strip_length(cmd.strip_index); i++)
  {
    // CRGB color = colors[i / 16];
    leds->fade_led(cmd, i, color);
  }
}